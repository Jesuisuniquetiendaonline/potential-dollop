<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulario</title>
  <link rel="stylesheet" href="formulario.css">
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <style>
    .field {
      margin-bottom: 10px;
    }

    .field label {
      display: block;
      font-size: 12px;
      color: #777;
    }

    .field input {
      display: block;
      min-width: 250px;
      line-height: 1.5;
      font-size: 14px;
    }

    input[type="submit"] {
      display: block;
      padding: 6px 30px;
      font-size: 14px;
      background-color: #4460AA;
      color: #fff;
      border: none;
    }

    .cart-container {
      margin-top: 20px;
    }

    .cart-item {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .cart-item-image {
      width: 50px;
      height: 50px;
      margin-right: 10px;
    }

    .cart-item-details {
      display: flex;
      flex-direction: column;
    }
  </style>
</head>
<body>
  <header>
   
    <!-- Menús Desplegables -->
    <nav class="dropdowns">
        <div class="dropdown">
            <button class="dropbtn">Home</button>
            <div class="dropdown-content">
                <a href="nuevojesus.html">Volver</a>
            
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSewkugkkCsOJ9tt4IbU2bwmozmBWZL73FXAYfFcjt2wc9N74w/viewform">Encuesta de la Empresa.</a>
            </div>
        </div>
       
        <div class="dropdown">
            <button class="dropbtn">Redes sociales</button>
            <div class="dropdown-content">
                <a href="https://www.instagram.com/je.suis.unisque?igsh=MXIwNXk0aDk5cG4wOA==">instagram<img src="instagram.png" width="20px" height="20px"></a>
                <a href="https://www.tiktok.com/@je.suis.unque?_t=8oNQNjqwIXm&_r=1">Tik Tok<img src="tito.png" width="20px "height="20px"></a>
                <a href="https://www.facebook.com/profile.php?id=61563141217672">facebook<img src="facebook.png" width="20px "height="20px"></a>
                <a href="#">WhatsApp<img src="wapsap.png" width="20px "height="20px"></a>
            </div>
        </div>
    </nav>
</header>

  <video autoplay muted loop class="video-background">
    <source src="video-background-full-hd-at-the-core.mp4" type="video/mp4">
    Tu navegador no soporta la etiqueta de video.
  </video>

 
  <center><div class="cart-container">
    <h2 style="color:white ;">Carrito de Encargo</h2>
    <div class="cart-items">
      <!-- Aquí se mostrarán los productos seleccionados -->
       <left>Deseas pedir tu Encargo por otro meido aqui tienes
       <br>
       Email: je.suis.unisque@gmail.com
       <br>
       WhatsApp: 316 3181814
       <br> 
       Solo debes escribir el numero de tu producto por ejemplo
       #16,#25, etc.
       <br>  
       Este sera guardado y podras reclamarlo en el puesto de Je Suis Unique
       <br>
       Por el siguente formulario podras guardar tu  producto favorito antes de que se agote recibirás un correo electronico el cual verificara el guardado de tu producto y en que momento puedes pasar por el junto precio total a el correo electronico escrito en el formulario.
    </div>
  </left>
    <p class="cart-total"></p>
  </div>

  <form id="form">
   <div class="field-container">

   <div class="field">
      <label for="from_name">Nombre completo</label>
      <input type="text" name="from_name" id="from_name">
    </div>
    <div class="field">
      <label for="message">Message</label>
      <input type="text" name="message" id="message">
    </div>
    <div class="field">
      <label for="email_id">Email ID</label>
      <input type="text" name="email_id" id="email_id">
    </div>
    <div class="field">
      <label for="reply_to">Numero del producto Ejemplo :1#,8# </label>
      <input type="text" name="reply_to" id="reply_to">
    </div>
    <div class="field">
      <label for="direcion_pepe">Direcion:</label>
      <input type="text" name="direcion_pepe" id="direcion_pepe">
    </div>
    <div class="field">
      <label for="numero_telefonico">Numero telefonico:</label>
      <input type="text" name="numero_telefonico" id="numero_telefonico">
    </div>
    <div class="field">
      <label for="reply_to">comentarios y sujerencias </label>
      <input type="text" name="cometarios_sujerencias" id="cometarios_sujerencias">
    

    <input type="submit" id="button" value="Enviar">
  </form>
</div></center>


  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
      const cartContainer = document.querySelector('.cart-items');
      const cartTotal = document.querySelector('.cart-total');
      let total = 0;

      if (cartItems.length === 0) {
        cartContainer.innerHTML = '<p>No hay productos en el carrito.</p>';
      } else {
        cartItems.forEach(item => {
          total += item.price * item.quantity;
          const cartItem = document.createElement('div');
          cartItem.classList.add('cart-item');
          cartItem.innerHTML = `
            <img src="${item.image}" alt="${item.name}" class="cart-item-image">
            <div class="cart-item-details">
              <p>${item.name}</p>
              <p>Cantidad: ${item.quantity}</p>
              <p>Precio: $${item.price}</p>
            </div>
          `;
          cartContainer.appendChild(cartItem);
        });
        cartTotal.textContent = `Total: $${total}`;
      }

      const form = document.getElementById('form');
      form.addEventListener('submit', function(event) {
        event.preventDefault();
        sendEmail(cartItems, total);
      });

      function sendEmail(cartItems, total) {
        const fromName = document.getElementById('from_name').value;
        const message = document.getElementById('message').value;
        const emailId = document.getElementById('email_id').value;
        const replyTo = document.getElementById('reply_to').value;

        const cartDetails = cartItems.map(item => {
          return `<p>${item.name} - Cantidad: ${item.quantity} - Precio: $${item.price}</p><img src="${item.image}" alt="${item.name}" style="width: 50px; height: 50px;">`;
        }).join('');

        const templateParams = {
          from_name: fromName,
          message: message,
          email_id: emailId,
          reply_to: replyTo,
          cart_details: cartDetails,
          total: total
        };

        emailjs.send('default_service', 'template_afwk28j', templateParams)
          .then(() => {
            alert('Email enviado!');
          }, (err) => {
            alert(JSON.stringify(err));
          });
      }
    });
  </script>

  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script type="text/javascript">
    emailjs.init('RvZAesVUZvqW5NNkc');

    const btn = document.getElementById('button');

    document.getElementById('form').addEventListener('submit', function(event) {
      event.preventDefault();

      btn.value = 'Sending...';

      const serviceID = 'default_service';
      const templateID = 'template_afwk28j';

      emailjs.sendForm(serviceID, templateID, this)
        .then(() => {
          btn.value = 'Send Email';
          alert('Sent!');
        }, (err) => {
          btn.value = 'Send Email';
          alert(JSON.stringify(err));
        });
    });
  </script>
</body>
</html>
